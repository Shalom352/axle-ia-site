// Axle IA - Translation System
const translations = {
    en: {
        // Navigation
        nav_services: "Our Services",
        nav_process: "Our Process", 
        nav_mission: "Our Mission",
        nav_blog: "Blog",
        nav_careers: "Careers",
        
        // Hero Section
        hero_title: "Experience cutting-edge AI solutions",
        hero_subtitle: "Tailored AI solutions for business transformation",
        cta_button: "Get Started",
        learn_more: "Learn More",
        
        // Services Section
        services_title: "Our Services",
        services_subtitle: "Comprehensive AI solutions designed to transform your business",
        service_ai_agents: "Tailored AI Agents",
        service_ai_agents_desc: "Custom AI solutions designed specifically for your business needs and workflows",
        service_automation: "Smart Process Automation",
        service_automation_desc: "Streamline your operations with intelligent automation that learns and adapts",
        service_chatbot: "Chatbot Development",
        service_chatbot_desc: "Engage customers 24/7 with smart conversational AI that understands context",
        service_marketing: "Data-Driven Digital Marketing",
        service_marketing_desc: "Optimize your marketing strategies with AI-powered insights and analytics",
        service_integration: "Seamless Integration",
        service_integration_desc: "Integrate AI solutions smoothly into your existing systems and workflows",
        
        // Process Section
        process_title: "Our Process",
        process_subtitle: "A proven methodology to deliver exceptional AI solutions",
        process_step1: "Introductory Consultation",
        process_step1_desc: "Understanding your unique business challenges, goals, and current technological landscape",
        process_step2: "Tailored Strategy Development", 
        process_step2_desc: "Creating a customized AI implementation plan that aligns with your business objectives",
        process_step3: "Seamless Implementation",
        process_step3_desc: "Deploying AI solutions with minimal disruption to your existing operations",
        process_step4: "Ongoing Support and Optimization",
        process_step4_desc: "Continuous improvement, monitoring, and dedicated support to maximize ROI",
        
        // Mission Section
        mission_title: "Our Mission",
        mission_statement: "Helping businesses work smarter with AI",
        mission_description: "We empower companies through AI technologies, making innovation accessible to businesses of all sizes. Our goal is to bridge the gap between cutting-edge artificial intelligence and practical business solutions.",
        stat_projects: "Projects Delivered",
        stat_regions: "Regions Served", 
        stat_satisfaction: "Client Satisfaction",
        
        // Footer
        footer_description: "Transforming businesses through cutting-edge AI solutions across Dubai and Côte d'Ivoire.",
        footer_company: "Company",
        footer_services: "Services",
        footer_process: "Process",
        footer_mission: "Mission",
        footer_blog: "Blog",
        footer_careers: "Careers",
        footer_contact: "Contact",
        footer_newsletter: "Stay Updated",
        newsletter_description: "Get the latest insights on AI and business transformation.",
        newsletter_button: "Subscribe",
        footer_copyright: "© 2024 Axle IA. All rights reserved.",
        privacy_policy: "Privacy Policy",
        terms_service: "Terms of Service",
        
        // Contact Modal
        modal_title: "Get Started with Axle IA",
        form_name: "Name",
        form_email: "Email",
        form_company: "Company",
        form_message: "Message",
        form_submit: "Submit"
    },
    
    fr: {
        // Navigation
        nav_services: "Nos Services",
        nav_process: "Notre Processus",
        nav_mission: "Notre Mission", 
        nav_blog: "Blog",
        nav_careers: "Carrières",
        
        // Hero Section
        hero_title: "Découvrez des solutions IA de pointe",
        hero_subtitle: "Solutions IA sur mesure pour la transformation des entreprises",
        cta_button: "Commencer",
        learn_more: "En Savoir Plus",
        
        // Services Section
        services_title: "Nos Services",
        services_subtitle: "Solutions IA complètes conçues pour transformer votre entreprise",
        service_ai_agents: "Agents IA Sur Mesure",
        service_ai_agents_desc: "Solutions IA personnalisées conçues spécifiquement pour vos besoins et flux de travail",
        service_automation: "Automatisation Intelligente",
        service_automation_desc: "Rationalisez vos opérations avec une automatisation intelligente qui apprend et s'adapte",
        service_chatbot: "Développement de Chatbots",
        service_chatbot_desc: "Engagez vos clients 24h/24 avec une IA conversationnelle intelligente qui comprend le contexte",
        service_marketing: "Marketing Digital Axé Données",
        service_marketing_desc: "Optimisez vos stratégies marketing avec des insights et analyses alimentés par l'IA",
        service_integration: "Intégration Transparente",
        service_integration_desc: "Intégrez facilement les solutions IA dans vos systèmes et flux de travail existants",
        
        // Process Section
        process_title: "Notre Processus",
        process_subtitle: "Une méthodologie éprouvée pour fournir des solutions IA exceptionnelles",
        process_step1: "Consultation Initiale",
        process_step1_desc: "Comprendre vos défis commerciaux uniques, objectifs et paysage technologique actuel",
        process_step2: "Développement de Stratégie Sur Mesure",
        process_step2_desc: "Créer un plan de mise en œuvre IA personnalisé aligné sur vos objectifs commerciaux",
        process_step3: "Mise en Œuvre Transparente", 
        process_step3_desc: "Déployer des solutions IA avec un minimum de perturbation de vos opérations existantes",
        process_step4: "Support Continu et Optimisation",
        process_step4_desc: "Amélioration continue, surveillance et support dédié pour maximiser le ROI",
        
        // Mission Section
        mission_title: "Notre Mission",
        mission_statement: "Aider les entreprises à travailler plus intelligemment avec l'IA",
        mission_description: "Nous donnons aux entreprises les moyens d'agir grâce aux technologies IA, rendant l'innovation accessible aux entreprises de toutes tailles. Notre objectif est de combler le fossé entre l'intelligence artificielle de pointe et les solutions commerciales pratiques.",
        stat_projects: "Projets Livrés",
        stat_regions: "Régions Servies",
        stat_satisfaction: "Satisfaction Client",
        
        // Footer
        footer_description: "Transformer les entreprises grâce à des solutions IA de pointe à travers Dubaï et la Côte d'Ivoire.",
        footer_company: "Entreprise",
        footer_services: "Services",
        footer_process: "Processus",
        footer_mission: "Mission",
        footer_blog: "Blog", 
        footer_careers: "Carrières",
        footer_contact: "Contact",
        footer_newsletter: "Restez Informé",
        newsletter_description: "Recevez les dernières perspectives sur l'IA et la transformation des entreprises.",
        newsletter_button: "S'abonner",
        footer_copyright: "© 2024 Axle IA. Tous droits réservés.",
        privacy_policy: "Politique de Confidentialité",
        terms_service: "Conditions d'Utilisation",
        
        // Contact Modal
        modal_title: "Commencez avec Axle IA",
        form_name: "Nom",
        form_email: "Email",
        form_company: "Entreprise", 
        form_message: "Message",
        form_submit: "Envoyer"
    }
};

// Language Management System
class LanguageManager {
    constructor() {
        this.currentLang = this.detectLanguage();
        this.init();
    }
    
    detectLanguage() {
        // Priority: localStorage > browser language > default
        const savedLang = localStorage.getItem('selectedLanguage');
        if (savedLang && translations[savedLang]) {
            return savedLang;
        }
        
        const browserLang = navigator.language || navigator.userLanguage;
        if (browserLang.startsWith('fr')) {
            return 'fr';
        }
        
        return 'en'; // Default
    }
    
    init() {
        this.updateLanguageToggle();
        this.translatePage();
        this.bindEvents();
        
        // Update page language attribute
        document.documentElement.lang = this.currentLang;
        
        console.log(`🌐 Language initialized: ${this.currentLang.toUpperCase()}`);
    }
    
    bindEvents() {
        const langToggle = document.getElementById('langToggle');
        if (langToggle) {
            langToggle.addEventListener('click', () => {
                this.toggleLanguage();
            });
        }
    }
    
    toggleLanguage() {
        this.currentLang = this.currentLang === 'en' ? 'fr' : 'en';
        this.saveLanguage();
        this.updateLanguageToggle();
        this.translatePage();
        
        // Update page language attribute
        document.documentElement.lang = this.currentLang;
        
        // Trigger custom event for other components
        window.dispatchEvent(new CustomEvent('languageChanged', {
            detail: { language: this.currentLang }
        }));
    }
    
    saveLanguage() {
        localStorage.setItem('selectedLanguage', this.currentLang);
    }
    
    updateLanguageToggle() {
        const langToggle = document.getElementById('langToggle');
        if (langToggle) {
            langToggle.textContent = this.currentLang.toUpperCase();
            langToggle.setAttribute('aria-label', `Switch to ${this.currentLang === 'en' ? 'French' : 'English'}`);
        }
    }
    
    translatePage() {
        const elements = document.querySelectorAll('[data-translate]');
        const currentTranslations = translations[this.currentLang];
        
        elements.forEach(element => {
            const key = element.getAttribute('data-translate');
            const translation = currentTranslations[key];
            
            if (translation) {
                // Handle different element types
                if (element.tagName === 'INPUT') {
                    if (element.type === 'submit' || element.type === 'button') {
                        element.value = translation;
                    } else {
                        element.placeholder = translation;
                    }
                } else if (element.tagName === 'TEXTAREA') {
                    element.placeholder = translation;
                } else if (element.tagName === 'BUTTON') {
                    // Preserve any icons/HTML and just replace text
                    const html = element.innerHTML;
                    const textOnly = element.textContent.trim();
                    element.innerHTML = html.replace(textOnly, translation);
                } else {
                    element.textContent = translation;
                }
            } else {
                console.warn(`Translation missing for key: ${key} in language: ${this.currentLang}`);
            }
        });
        
        // Update page title
        this.updatePageTitle();
    }
    
    updatePageTitle() {
        const titles = {
            en: 'Axle IA - AI Solutions for Business',
            fr: 'Axle IA - Solutions IA pour Entreprises'
        };
        
        document.title = titles[this.currentLang] || titles.en;
    }
    
    // Public method to get current language
    getCurrentLanguage() {
        return this.currentLang;
    }
    
    // Public method to get translation
    translate(key) {
        return translations[this.currentLang][key] || translations.en[key] || key;
    }
    
    // Public method to set language programmatically
    setLanguage(lang) {
        if (translations[lang]) {
            this.currentLang = lang;
            this.saveLanguage();
            this.updateLanguageToggle();
            this.translatePage();
            document.documentElement.lang = this.currentLang;
        }
    }
}

// Initialize language manager when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
    // Create global language manager instance
    window.languageManager = new LanguageManager();
    
    // Make translation function globally available
    window.t = function(key) {
        return window.languageManager.translate(key);
    };
    
    // Listen for dynamic content updates
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            mutation.addedNodes.forEach(function(node) {
                if (node.nodeType === 1) { // Element node
                    const translatableElements = node.querySelectorAll('[data-translate]');
                    if (translatableElements.length > 0) {
                        window.languageManager.translatePage();
                    }
                }
            });
        });
    });
    
    observer.observe(document.body, {
        childList: true,
        subtree: true
    });
});

// Export for use in other modules
if (typeof module !== 'undefined' && module.exports) {
    module.exports = { translations, LanguageManager };
}