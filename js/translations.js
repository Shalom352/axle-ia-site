// Axle IA - Translation System
const translations = {
    en: {
        // Navigation
        nav_services: "Our Services",
        nav_process: "Our Process", 
        nav_mission: "Our Mission",
        nav_blog: "Blog",
        nav_careers: "Careers",
        
        // Hero Section
        hero_title: "Experience cutting-edge AI solutions",
        hero_subtitle: "Tailored AI solutions for business transformation",
        cta_button: "Get Started",
        learn_more: "Learn More",
        
        // Services Section
        services_title: "Our Services",
        services_subtitle: "Comprehensive AI solutions designed to transform your business",
        service_ai_agents: "Tailored AI Agents",
        service_ai_agents_desc: "Custom AI solutions designed specifically for your business needs and workflows",
        service_automation: "Smart Process Automation",
        service_automation_desc: "Streamline your operations with intelligent automation that learns and adapts",
        service_chatbot: "Chatbot Development",
        service_chatbot_desc: "Engage customers 24/7 with smart conversational AI that understands context",
        service_marketing: "Data-Driven Digital Marketing",
        service_marketing_desc: "Optimize your marketing strategies with AI-powered insights and analytics",
        service_integration: "Seamless Integration",
        service_integration_desc: "Integrate AI solutions smoothly into your existing systems and workflows",
        
        // Process Section
        process_title: "Our Process",
        process_subtitle: "A proven methodology to deliver exceptional AI solutions",
        process_step1: "Introductory Consultation",
        process_step1_desc: "Understanding your unique business challenges, goals, and current technological landscape",
        process_step2: "Tailored Strategy Development", 
        process_step2_desc: "Creating a customized AI implementation plan that aligns with your business objectives",
        process_step3: "Seamless Implementation",
        process_step3_desc: "Deploying AI solutions with minimal disruption to your existing operations",
        process_step4: "Ongoing Support and Optimization",
        process_step4_desc: "Continuous improvement, monitoring, and dedicated support to maximize ROI",
        
        // Mission Section
        mission_title: "Our Mission",
        mission_statement: "Helping businesses work smarter with AI",
        mission_description: "We empower companies through AI technologies, making innovation accessible to businesses of all sizes. Our goal is to bridge the gap between cutting-edge artificial intelligence and practical business solutions.",
        stat_projects: "Projects Delivered",
        stat_regions: "Regions Served", 
        stat_satisfaction: "Client Satisfaction",
        
        // Footer
        footer_description: "Transforming businesses through cutting-edge AI solutions across Dubai and C√¥te d'Ivoire.",
        footer_company: "Company",
        footer_services: "Services",
        footer_process: "Process",
        footer_mission: "Mission",
        footer_blog: "Blog",
        footer_careers: "Careers",
        footer_contact: "Contact",
        footer_newsletter: "Stay Updated",
        newsletter_description: "Get the latest insights on AI and business transformation.",
        newsletter_button: "Subscribe",
        footer_copyright: "¬© 2024 Axle IA. All rights reserved.",
        privacy_policy: "Privacy Policy",
        terms_service: "Terms of Service",
        
        // Contact Modal
        modal_title: "Get Started with Axle IA",
        form_name: "Name",
        form_email: "Email",
        form_company: "Company",
        form_message: "Message",
        form_submit: "Start My AI Project",
        
        // Enhanced Form Fields
        form_section_basic: "üìã Basic Information",
        form_section_business: "üéØ Business Needs", 
        form_section_timing: "‚è∞ Urgency & Timing",
        form_section_message: "üí¨ Personalized Message",
        
        form_position: "Position/Role",
        form_phone: "Phone",
        form_objective: "Main Objective",
        form_select_objective: "Select your objective",
        form_obj_automation: "Process Automation",
        form_obj_chatbot: "Customer Chatbot",
        form_obj_data: "AI Data Analysis",
        form_obj_marketing: "AI Digital Marketing", 
        form_obj_custom: "Custom Solution",
        form_obj_other: "Other",
        form_custom_objective: "Specify your objective",
        
        form_company_size: "Company Size",
        form_select_size: "Select company size",
        form_size_startup: "Startup (1-10 employees)",
        form_size_sme: "SME (11-50 employees)",
        form_size_medium: "Medium company (51-200)",
        form_size_large: "Large company (200+)",
        
        form_budget: "Monthly Budget Range",
        form_select_budget: "Select your budget",
        form_budget_1k: "< ‚Ç¨1,000",
        form_budget_1k5k: "‚Ç¨1,000 - ‚Ç¨5,000",
        form_budget_5k15k: "‚Ç¨5,000 - ‚Ç¨15,000", 
        form_budget_15k50k: "‚Ç¨15,000 - ‚Ç¨50,000",
        form_budget_50k: "+ ‚Ç¨50,000",
        form_budget_discuss: "To be discussed",
        
        form_decision_maker: "Are you the final decision maker for this project?",
        form_select_decision: "Select",
        form_decision_yes: "Yes, I am the decision maker",
        form_decision_partial: "Partially, I influence the decision",
        form_decision_no: "No, I need to consult others",
        
        form_timeline: "When would you like to start?",
        form_select_timeline: "Select your urgency",
        form_timeline_immediate: "Immediately",
        form_timeline_month: "Within a month",
        form_timeline_quarter: "Within 2-3 months",
        form_timeline_semester: "Within 6 months",
        form_timeline_undefined: "Not yet defined",
        
        form_call_time: "Best time slot for a call",
        form_select_call: "Select a time slot",
        form_call_morning: "Morning (9am-12pm)",
        form_call_afternoon: "Afternoon (2pm-5pm)",
        form_call_evening: "End of day (5pm-7pm)",
        form_call_flexible: "Flexible",
        
        form_message_placeholder: "E.g.: We want to automate our customer service and reduce response times...",
        form_privacy: "üîí Your data is secure and will never be shared with third parties.",
        
        // Footer stats
        footer_stat_projects: "Projects",
        footer_stat_regions: "Regions", 
        footer_stat_satisfaction: "Satisfaction"
    },
    
    fr: {
        // Navigation
        nav_services: "Nos Services",
        nav_process: "Notre Processus",
        nav_mission: "Notre Mission", 
        nav_blog: "Blog",
        nav_careers: "Carri√®res",
        
        // Hero Section
        hero_title: "D√©couvrez des solutions IA de pointe",
        hero_subtitle: "Solutions IA sur mesure pour la transformation des entreprises",
        cta_button: "Commencer",
        learn_more: "En Savoir Plus",
        
        // Services Section
        services_title: "Nos Services",
        services_subtitle: "Solutions IA compl√®tes con√ßues pour transformer votre entreprise",
        service_ai_agents: "Agents IA Sur Mesure",
        service_ai_agents_desc: "Solutions IA personnalis√©es con√ßues sp√©cifiquement pour vos besoins et flux de travail",
        service_automation: "Automatisation Intelligente",
        service_automation_desc: "Rationalisez vos op√©rations avec une automatisation intelligente qui apprend et s'adapte",
        service_chatbot: "D√©veloppement de Chatbots",
        service_chatbot_desc: "Engagez vos clients 24h/24 avec une IA conversationnelle intelligente qui comprend le contexte",
        service_marketing: "Marketing Digital Ax√© Donn√©es",
        service_marketing_desc: "Optimisez vos strat√©gies marketing avec des insights et analyses aliment√©s par l'IA",
        service_integration: "Int√©gration Transparente",
        service_integration_desc: "Int√©grez facilement les solutions IA dans vos syst√®mes et flux de travail existants",
        
        // Process Section
        process_title: "Notre Processus",
        process_subtitle: "Une m√©thodologie √©prouv√©e pour fournir des solutions IA exceptionnelles",
        process_step1: "Consultation Initiale",
        process_step1_desc: "Comprendre vos d√©fis commerciaux uniques, objectifs et paysage technologique actuel",
        process_step2: "D√©veloppement de Strat√©gie Sur Mesure",
        process_step2_desc: "Cr√©er un plan de mise en ≈ìuvre IA personnalis√© align√© sur vos objectifs commerciaux",
        process_step3: "Mise en ≈íuvre Transparente", 
        process_step3_desc: "D√©ployer des solutions IA avec un minimum de perturbation de vos op√©rations existantes",
        process_step4: "Support Continu et Optimisation",
        process_step4_desc: "Am√©lioration continue, surveillance et support d√©di√© pour maximiser le ROI",
        
        // Mission Section
        mission_title: "Notre Mission",
        mission_statement: "Aider les entreprises √† travailler plus intelligemment avec l'IA",
        mission_description: "Nous donnons aux entreprises les moyens d'agir gr√¢ce aux technologies IA, rendant l'innovation accessible aux entreprises de toutes tailles. Notre objectif est de combler le foss√© entre l'intelligence artificielle de pointe et les solutions commerciales pratiques.",
        stat_projects: "Projets Livr√©s",
        stat_regions: "R√©gions Servies",
        stat_satisfaction: "Satisfaction Client",
        
        // Footer
        footer_description: "Transformer les entreprises gr√¢ce √† des solutions IA de pointe √† travers Duba√Ø et la C√¥te d'Ivoire.",
        footer_company: "Entreprise",
        footer_services: "Services",
        footer_process: "Processus",
        footer_mission: "Mission",
        footer_blog: "Blog", 
        footer_careers: "Carri√®res",
        footer_contact: "Contact",
        footer_newsletter: "Restez Inform√©",
        newsletter_description: "Recevez les derni√®res perspectives sur l'IA et la transformation des entreprises.",
        newsletter_button: "S'abonner",
        footer_copyright: "¬© 2024 Axle IA. Tous droits r√©serv√©s.",
        privacy_policy: "Politique de Confidentialit√©",
        terms_service: "Conditions d'Utilisation",
        
        // Contact Modal
        modal_title: "Commencez avec Axle IA",
        form_name: "Nom",
        form_email: "Email",
        form_company: "Entreprise", 
        form_message: "Message",
        form_submit: "D√©marrer mon projet IA",
        
        // Enhanced Form Fields - French
        form_section_basic: "üìã Informations de Base",
        form_section_business: "üéØ Besoins Business", 
        form_section_timing: "‚è∞ Urgence & Timing",
        form_section_message: "üí¨ Message Personnalis√©",
        
        form_position: "Poste/Fonction",
        form_phone: "T√©l√©phone",
        form_objective: "Objectif principal",
        form_select_objective: "S√©lectionnez votre objectif",
        form_obj_automation: "Automatisation des processus",
        form_obj_chatbot: "Chatbot client",
        form_obj_data: "Analyse de donn√©es IA",
        form_obj_marketing: "Marketing digital IA", 
        form_obj_custom: "Solution personnalis√©e",
        form_obj_other: "Autre",
        form_custom_objective: "Pr√©cisez votre objectif",
        
        form_company_size: "Taille d'entreprise",
        form_select_size: "S√©lectionnez la taille",
        form_size_startup: "Startup (1-10 employ√©s)",
        form_size_sme: "PME (11-50 employ√©s)",
        form_size_medium: "Moyenne entreprise (51-200)",
        form_size_large: "Grande entreprise (200+)",
        
        form_budget: "Budget mensuel envisag√©",
        form_select_budget: "S√©lectionnez votre budget",
        form_budget_1k: "< 1,000‚Ç¨",
        form_budget_1k5k: "1,000‚Ç¨ - 5,000‚Ç¨",
        form_budget_5k15k: "5,000‚Ç¨ - 15,000‚Ç¨", 
        form_budget_15k50k: "15,000‚Ç¨ - 50,000‚Ç¨",
        form_budget_50k: "+ 50,000‚Ç¨",
        form_budget_discuss: "√Ä discuter",
        
        form_decision_maker: "√ätes-vous le d√©cideur final pour ce projet ?",
        form_select_decision: "S√©lectionnez",
        form_decision_yes: "Oui, je suis le d√©cideur",
        form_decision_partial: "Partiellement, j'influence la d√©cision",
        form_decision_no: "Non, je dois consulter d'autres personnes",
        
        form_timeline: "Quand souhaitez-vous d√©marrer ?",
        form_select_timeline: "S√©lectionnez votre urgence",
        form_timeline_immediate: "Imm√©diatement",
        form_timeline_month: "Dans le mois",
        form_timeline_quarter: "Dans 2-3 mois",
        form_timeline_semester: "Dans 6 mois",
        form_timeline_undefined: "Pas encore d√©fini",
        
        form_call_time: "Meilleur cr√©neau pour un appel",
        form_select_call: "S√©lectionnez un cr√©neau",
        form_call_morning: "Matin (9h-12h)",
        form_call_afternoon: "Apr√®s-midi (14h-17h)",
        form_call_evening: "Fin de journ√©e (17h-19h)",
        form_call_flexible: "Flexible",
        
        form_message_placeholder: "Ex: Nous souhaitons automatiser notre service client et r√©duire les temps de r√©ponse...",
        form_privacy: "üîí Vos donn√©es sont s√©curis√©es et ne seront jamais partag√©es avec des tiers.",
        
        // Footer stats
        footer_stat_projects: "Projets",
        footer_stat_regions: "R√©gions",
        footer_stat_satisfaction: "Satisfaction"
    }
};

// Language Management System
class LanguageManager {
    constructor() {
        this.currentLang = this.detectLanguage();
        this.init();
    }
    
    detectLanguage() {
        // Priority: localStorage > browser language > default
        const savedLang = localStorage.getItem('selectedLanguage');
        if (savedLang && translations[savedLang]) {
            return savedLang;
        }
        
        const browserLang = navigator.language || navigator.userLanguage;
        if (browserLang.startsWith('fr')) {
            return 'fr';
        }
        
        return 'en'; // Default
    }
    
    init() {
        this.updateLanguageToggle();
        this.translatePage();
        this.bindEvents();
        
        // Update page language attribute
        document.documentElement.lang = this.currentLang;
        
        console.log(`üåê Language initialized: ${this.currentLang.toUpperCase()}`);
    }
    
    bindEvents() {
        const langToggle = document.getElementById('langToggle');
        if (langToggle) {
            langToggle.addEventListener('click', () => {
                this.toggleLanguage();
            });
        }
    }
    
    toggleLanguage() {
        this.currentLang = this.currentLang === 'en' ? 'fr' : 'en';
        this.saveLanguage();
        this.updateLanguageToggle();
        this.translatePage();
        
        // Update page language attribute
        document.documentElement.lang = this.currentLang;
        
        // Trigger custom event for other components
        window.dispatchEvent(new CustomEvent('languageChanged', {
            detail: { language: this.currentLang }
        }));
    }
    
    saveLanguage() {
        localStorage.setItem('selectedLanguage', this.currentLang);
    }
    
    updateLanguageToggle() {
        const langToggle = document.getElementById('langToggle');
        if (langToggle) {
            langToggle.textContent = this.currentLang.toUpperCase();
            langToggle.setAttribute('aria-label', `Switch to ${this.currentLang === 'en' ? 'French' : 'English'}`);
        }
    }
    
    translatePage() {
        const elements = document.querySelectorAll('[data-translate]');
        const currentTranslations = translations[this.currentLang];
        
        elements.forEach(element => {
            const key = element.getAttribute('data-translate');
            const translation = currentTranslations[key];
            
            if (translation) {
                // Handle different element types
                if (element.tagName === 'INPUT') {
                    if (element.type === 'submit' || element.type === 'button') {
                        element.value = translation;
                    } else {
                        element.placeholder = translation;
                    }
                } else if (element.tagName === 'TEXTAREA') {
                    element.placeholder = translation;
                } else if (element.tagName === 'BUTTON') {
                    // Preserve any icons/HTML and just replace text
                    const html = element.innerHTML;
                    const textOnly = element.textContent.trim();
                    element.innerHTML = html.replace(textOnly, translation);
                } else {
                    element.textContent = translation;
                }
            } else {
                console.warn(`Translation missing for key: ${key} in language: ${this.currentLang}`);
            }
        });
        
        // Update page title
        this.updatePageTitle();
    }
    
    updatePageTitle() {
        const titles = {
            en: 'Axle IA - AI Solutions for Business',
            fr: 'Axle IA - Solutions IA pour Entreprises'
        };
        
        document.title = titles[this.currentLang] || titles.en;
    }
    
    // Public method to get current language
    getCurrentLanguage() {
        return this.currentLang;
    }
    
    // Public method to get translation
    translate(key) {
        return translations[this.currentLang][key] || translations.en[key] || key;
    }
    
    // Public method to set language programmatically
    setLanguage(lang) {
        if (translations[lang]) {
            this.currentLang = lang;
            this.saveLanguage();
            this.updateLanguageToggle();
            this.translatePage();
            document.documentElement.lang = this.currentLang;
        }
    }
}

// Initialize language manager when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
    // Create global language manager instance
    window.languageManager = new LanguageManager();
    
    // Make translation function globally available
    window.t = function(key) {
        return window.languageManager.translate(key);
    };
    
    // Listen for dynamic content updates
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            mutation.addedNodes.forEach(function(node) {
                if (node.nodeType === 1) { // Element node
                    const translatableElements = node.querySelectorAll('[data-translate]');
                    if (translatableElements.length > 0) {
                        window.languageManager.translatePage();
                    }
                }
            });
        });
    });
    
    observer.observe(document.body, {
        childList: true,
        subtree: true
    });
});

// Export for use in other modules
if (typeof module !== 'undefined' && module.exports) {
    module.exports = { translations, LanguageManager };
}